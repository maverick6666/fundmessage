# E2E 테스트 결과

> 테스트 일시: 2026-02-08
> 환경: 로컬 (Docker DB + Backend + Frontend:3000)
> 테스트 계정: 팀장(lhhh0420@naver.com), 팀원(test@naver.com)

## 요약

| 카테고리 | 총 시나리오 | 통과 | 실패 | 스킵 | 진행률 |
|----------|-------------|------|------|------|--------|
| A. 인증 | 3 | 3 | 0 | 0 | 100% |
| B. 대시보드 | 4 | 4 | 0 | 0 | 100% |
| C. 포지션 | 8 | 8 | 0 | 0 | 100% |
| D. 요청 | 6 | 5 | 0 | 1 | 83% |
| E. 토론방 | 6 | 6 | 0 | 0 | 100% |
| F. 문서 | 6 | 6 | 0 | 0 | 100% |
| G. 통계 | 2 | 2 | 0 | 0 | 100% |
| H. 알림 | 4 | 4 | 0 | 0 | 100% |
| I. 팀 관리 | 3 | 3 | 0 | 0 | 100% |
| J. 설정 | 1 | 1 | 0 | 0 | 100% |
| K. AI 기능 | 2 | 2 | 0 | 0 | 100% |
| L. 출석 | 3 | 1 | 0 | 2 | 33% |
| M. 관리자 모드 | 1 | 1 | 0 | 0 | 100% |
| N. 통합 플로우 | 8 | 7 | 0 | 1 | 88% |
| O. 뉴스데스크 | 7 | 3 | 0 | 4 | 43% |
| **합계** | **64** | **56** | **0** | **8** | **88%** |

**전체 결과: 56 PASS / 0 FAIL / 8 SKIP**

---

## 상세 결과

### A. 인증 (Auth) - 3/3 PASS

- [x] A1. 회원가입 - **PASS** (2026-02-08)
  - 폼 표시: OK
  - 비밀번호 불일치 에러: OK
  - 스크린샷: A_auth/A1_*.png

- [x] A2. 로그인 - **PASS**
  - 올바른 자격증명: 대시보드 이동 OK
  - 잘못된 비밀번호: 오류 토스트 OK
  - 스크린샷: A_auth/A2_*.png

- [x] A3. 로그아웃 - **PASS**
  - 로그아웃 후 로그인 페이지 이동 OK
  - 스크린샷: A_auth/A3_*.png

### B. 대시보드 (Dashboard) - 4/4 PASS

- [x] B1. 대시보드 조회 - **PASS**
- [x] B2. 팀 정보 탭 - **PASS**
- [x] B3. 팀 설정 (팀장) - **PASS**
  - Manager: 팀 설정 버튼 표시
  - Member: 팀 설정 버튼 숨김
- [x] B4. 환전 (팀장) - **PASS**
  - 환전 모달 정상 동작

### C. 포지션 (Positions) - 8/8 PASS

- [x] C1. 포지션 목록 조회 - **PASS**
- [x] C2. 포지션 요청 (종목 검색 + 매수 요청) - **PASS**
- [x] C3. 포지션 상세 조회 - **PASS**
  - 차트 표시 OK (TradingView)
  - 매매계획 섹션 OK
  - 의사결정노트 섹션 OK
- [x] C4. 포지션 정보 수정 (팀장) - **PASS**
  - Manager: 편집 버튼 표시
  - Member: 편집 버튼 숨김
- [x] C5. 매매계획 관리 - **PASS**
- [x] C6. 의사결정노트 CRUD - **PASS**
- [x] C7. 포지션 종료 (팀장) - **PASS**
  - Manager: "포지션 종료" 버튼
  - Member: "조기종료 요청" 버튼
- [x] C8. 토론 개시/요청 - **PASS**
  - Manager: "토론방 열기"
  - Member: "토론 요청"

### D. 요청 (Requests) - 5/6 PASS

- [x] D1. 요청 목록 조회 - **PASS**
- [x] D2. 요청 승인 (팀장) - **PASS**
  - 포지션 자동 생성 OK
- [x] D3. 요청 거부 (팀장) - **PASS**
  - 거부 사유 입력 및 저장 OK
- [x] D4. 토론 개시 (팀장) - **PASS**
- [ ] D5. 토론 요청 (팀원) - **SKIP** (대기중 요청 없음)
- [x] D6. 요청 삭제 (관리자) - **PASS**

### E. 토론방 (Discussions) - 6/6 PASS

- [x] E1. 토론 목록 조회 - **PASS**
- [x] E2. 실시간 메시지 전송 - **PASS**
  - 두 브라우저 간 메시지 동기화 OK
- [x] E3. 차트 공유 - **PASS**
- [x] E4. 토론 종료/재개 (팀장) - **PASS**
- [x] E5. 토론 재개 요청 (팀원) - **PASS**
- [x] E6. 세션 내보내기 (팀장) - **PASS**

### F. 문서 (Reports) - 6/6 PASS

- [x] F1. 운용보고서 탭 - **PASS**
- [x] F2. 의사결정서 탭 - **PASS**
- [x] F3. 칼럼 탭 - **PASS**
- [x] F4. 칼럼 작성 - **PASS**
- [x] F5. 칼럼 검증 (팀장) - **PASS**
- [x] F6. 칼럼 삭제 - **PASS**

### G. 통계 (Stats) - 2/2 PASS

- [x] G1. 팀 전체 통계 - **PASS**
- [x] G2. 내 성과 통계 - **PASS**

### H. 알림 (Notifications) - 4/4 PASS

- [x] H1. 알림 조회 - **PASS**
- [x] H2. 알림 읽음 처리 - **PASS**
- [x] H3. 알림 삭제 - **PASS**
- [x] H4. 실시간 알림 수신 - **PASS**

### I. 팀 관리 (Team Management) - 3/3 PASS

- [x] I1. 팀원 목록 조회 - **PASS**
- [x] I2. 역할 변경 - **PASS**
- [x] I3. 팀원 접근 차단 - **PASS**
  - Member: "접근 권한이 필요합니다" 메시지 표시

### J. 설정 (Settings) - 1/1 PASS

- [x] J1. 테마 변경 - **PASS**

### K. AI 기능 - 2/2 PASS

- [x] K1. AI 의사결정서 생성 - **PASS** (UI 확인)
- [x] K2. AI 운용보고서 생성 - **PASS** (UI 확인)

### L. 출석 (Attendance) - 1/3 PASS

- [x] L1. 출석 체크인 - **PASS**
- [ ] L2. 출석 복구 요청 - **SKIP** (결석 기록 없음)
- [ ] L3. 복구 승인/거부 (팀장) - **SKIP** (복구 요청 없음)

### M. 관리자 모드 - 1/1 PASS

- [x] M1. 관리자 모드 토글 - **PASS**
  - 삭제 버튼 표시/숨김 정상 동작

### N. 통합 플로우 (Integration) - 7/8 PASS

- [x] N1. 요청 → 토론 → 승인 전체 플로우 - **PASS**
- [x] N2. 열린 토론 경고 시나리오 - **PASS**
  - "⚠️ 열린 토론이 있습니다" 경고 모달 표시 OK
- [x] N3. 승인 후 정보 확인 플로우 - **PASS**
  - 미확인 배지 → 확인 완료 전환 OK
- [x] N4. 매매계획 수정 및 이력 시나리오 - **PASS**
  - "현재 계획 저장" 클릭 시에만 이력 생성 OK
- [x] N5. 매매계획 체결 실행 시나리오 - **PASS**
  - 체결 모달 및 이력 기록 OK
- [x] N6. 매매계획 토론 시나리오 - **PASS**
- [ ] N7. 운용보고서 작성 시나리오 - **PARTIAL** (종료된 포지션 없음)
- [x] N8. 권한별 UI 차이 검증 - **PASS**
  - Manager/Member UI 차이 검증 완료

### O. 뉴스데스크 (NewsDesk) - 3/7 PASS

- [x] O1. 뉴스데스크 조회 - **PASS**
- [x] O2. 날짜 선택기 - **PASS**
- [ ] O3. 벤치마크 차트 - **SKIP** (뉴스 데이터 없음)
- [x] O4. 뉴스데스크 생성 (팀장) - **PASS** (버튼 확인)
- [x] O5. 폴백 UI - **PASS**
- [ ] O6. 뉴스/칼럼 상세 보기 - **SKIP** (뉴스 없음)
- [ ] O7. 키워드 클라우드 - **SKIP** (뉴스 없음)

---

## 발견된 버그

| # | 시나리오 | 문제 | 스크린샷 | 수정 상태 |
|---|----------|------|----------|-----------|
| 1 | H4. 실시간 알림 수신 | WebSocket 알림 브로드캐스트 실패 (`asyncio.get_event_loop()` 문제) | - | ✅ 수정됨 (2026-02-08) |

### 버그 #1: 실시간 알림 WebSocket 브로드캐스트 실패

**증상**: 팀원이 요청을 생성해도 팀장에게 실시간 알림이 가지 않음 (새로고침 필요)

**원인**: `notification_service.py`의 `_broadcast_ws()` 메서드에서 `asyncio.get_event_loop()`가 async 컨텍스트에서 올바르게 동작하지 않음

**수정**: `asyncio.get_running_loop()` 사용 + 폴백 로직 추가

**검증**: 팀원 요청 생성 시 팀장 알림 수가 새로고침 없이 3→4로 증가 확인

---

## 스크린샷 저장 위치

모든 스크린샷: `test-screenshots/2026-02-08/`

```
test-screenshots/2026-02-08/
├── A_auth/ (5 files)
├── B_dashboard/ (6 files)
├── C_positions/ (19 files)
├── D_requests/ (10 files)
├── E_discussions/ (15 files)
├── F_reports/ (6 files)
├── G_stats/ (2 files)
├── H_notifications/ (3 files)
├── I_team_management/ (3 files)
├── J_settings/ (2 files)
├── K_ai/ (4 files)
├── L_attendance/ (3 files)
├── M_admin_mode/ (4 files)
├── N_integration/ (19 files)
└── O_newsdesk/ (5 files)
```

---

## 주요 검증 완료 항목

1. **역할 기반 접근 제어**: 팀장/팀원 UI 차이 검증 완료
2. **실시간 기능**: WebSocket 메시지 동기화 검증 완료
3. **요청 플로우**: 요청 → 토론 → 승인/거부 전체 플로우 검증 완료
4. **포지션 관리**: 생성, 수정, 매매계획, 의사결정노트 검증 완료
5. **열린 토론 경고**: N2 시나리오 구현 확인
6. **매매계획 이력**: "현재 계획 저장" 시에만 이력 생성 확인

---

## 콘솔 오류 (Non-Critical)

- WebSocket 연결 오류: 로컬 환경에서 간헐적 발생, 자동 재연결됨
- React Router Future Flag 경고: 기능에 영향 없음

---

## 테스트 완료 시간

- 시작: 2026-02-08 08:15
- 종료: 2026-02-08 09:45
- 총 소요: 약 1시간 30분
