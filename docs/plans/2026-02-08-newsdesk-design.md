# 뉴스데스크 기능 설계 문서

> **작성일**: 2026-02-08
> **상태**: 브레인스토밍 완료, 구현 계획 작성 중

---

## 1. 개요

### 목적
- 펀드팀의 새로운 **메인 페이지**
- AI가 매일 뉴스를 분석하여 콘텐츠 생성
- 투자 유치를 위한 **쇼케이스 기능**

### 사용자
- 팀장/팀원 전체
- 외부 투자자 (데모용)

---

## 2. 레이아웃 구조

```
┌─────────────────────────────────────────────────────────┐
│              📊 벤치마크 차트 (고정)                      │
│  [코스피] [나스닥] [S&P500] [우리팀] ← 토글 on/off       │
│  • 1개 선택: 가격 표시                                   │
│  • 2개+ 선택: 수익률 스케일링하여 겹쳐서 비교             │
└─────────────────────────────────────────────────────────┘

┌──────────────────────────┬──────────────────────────────┐
│                          │                              │
│    📰 카드 뉴스 (3-6개)   │     📈 시각화 영역           │
│                          │  ┌────────────────────────┐  │
│  ┌────────────────────┐  │  │ 🔵 키워드 버블          │  │
│  │ [AI 칼럼 1]        │  │  │  (클릭 → 우측 연동)    │  │
│  │ 제목 + 요약        │  │  └────────────────────────┘  │
│  │ 클릭→사이드뷰어    │  │  ┌────────────────────────┐  │
│  └────────────────────┘  │  │ 🌡️ 호재/악재 게이지     │  │
│  ┌────────────────────┐  │  │  (선택된 키워드 기준)   │  │
│  │ [뉴스 카드 2]      │  │  └────────────────────────┘  │
│  └────────────────────┘  │                              │
│  ┌────────────────────┐  │                              │
│  │ [뉴스 카드 3]      │  │                              │
│  └────────────────────┘  │                              │
│          ...             │                              │
└──────────────────────────┴──────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│                 🔥 오늘의 주목 종목 TOP 3                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │ 삼성전자     │  │ 테슬라      │  │ 엔비디아    │      │
│  │ KRX +2.3%  │  │ NASDAQ -1.5%│  │ NASDAQ +4.2%│      │
│  │ 거래대금 1.2조│ │ $45B       │  │ $38B        │      │
│  │ 클릭→상세   │  │            │  │             │      │
│  └─────────────┘  └─────────────┘  └─────────────┘      │
└─────────────────────────────────────────────────────────┘
```

---

## 3. 기술 스택

### AI 모델
- **GPT-5 mini**: 월 ~₩1,100
- 출력: 128K 토큰 (충분)

### 데이터 소스

| 소스 | 용도 | 방식 |
|------|------|------|
| 네이버 검색 API | 국내 뉴스 | 공식 API (무료) |
| yfinance | 해외 뉴스 + 시세 | 비공식 라이브러리 |

### 스케줄링
- 05:30 AM: 뉴스 수집
- 05:40 AM: AI 분석
- 06:00 AM: 콘텐츠 준비 완료
- 17:30 PM: (선택) 오후 업데이트

---

## 4. 인터랙션 플로우

### 키워드 버블 ↔ 감성 게이지 연동
1. 기본 상태: 전체 시장 호재/악재 표시
2. 키워드 버블 클릭 → 해당 키워드 호재/악재로 업데이트
3. 주목 종목 카드 클릭 → 해당 종목 호재/악재로 업데이트

### 콘텐츠 상세 보기
- 카드 뉴스 클릭 → 사이드 문서 뷰어로 전체 내용
- 주목 종목 클릭 → 사이드 뷰어로 종목 상세 정보

---

## 5. AI 생성 콘텐츠

### 한 번의 API 호출로 생성:
1. **AI 칼럼 2개** (~2,000자 × 2)
2. **뉴스 카드 6개** (제목 + 요약 + 상세)
3. **키워드 데이터** (버블 차트용)
4. **감성 분석 데이터** (호재/악재 비율)
5. **주목 종목 3개** (종목명 + 이유 + 상세 분석)

### 출력 형식: JSON
```json
{
  "columns": [...],
  "news_cards": [...],
  "keywords": [...],
  "sentiment": {...},
  "top_stocks": [...]
}
```

---

## 6. 폴백 전략

```
1순위: 네이버 API → 정상 콘텐츠
2순위: 직접 크롤링 → 정상 콘텐츠
3순위: 캐시된 뉴스 → "어제 뉴스 기반" 표시
4순위: 모두 실패 → 기본 UI + "업데이트 중" 메시지
```

---

## 7. 구현 Phase

### Phase 1: 기본 구조
- [ ] DB 모델 (NewsDesk, NewsCard, TopStock)
- [ ] API 엔드포인트
- [ ] 프론트엔드 페이지 골격

### Phase 2: 뉴스 수집
- [ ] 네이버 검색 API 연동
- [ ] yfinance 연동
- [ ] 스케줄러 설정

### Phase 3: AI 분석
- [ ] GPT-5 mini 프롬프트 설계
- [ ] JSON 파싱 로직
- [ ] 에러 핸들링

### Phase 4: 프론트엔드 시각화
- [ ] 벤치마크 차트 (토글)
- [ ] 키워드 버블 차트
- [ ] 호재/악재 게이지
- [ ] 주목 종목 카드

### Phase 5: 인터랙션 & 연동
- [ ] 버블 ↔ 게이지 연동
- [ ] 사이드 뷰어 연동
- [ ] 반응형 레이아웃

---

## 8. 열린 질문

- [ ] 벤치마크 차트 라이브러리 선택 (lightweight-charts 재사용?)
- [ ] 버블 차트 라이브러리 선택 (D3.js? Chart.js?)
- [ ] 네이버 API 키 발급 필요
