# Fund Messenger 테스트 시나리오

## 계정 정보

| 역할 | 이메일 | 비밀번호 |
|------|--------|----------|
| 팀장 (Manager) | lhhh0420@naver.com | lhh0420! |
| 팀원 (Member) | test@naver.com | 12345678 |

## 배포 URL

- **Frontend**: https://fundmessage.vercel.app
- **Backend API**: https://port-0-fundmessage-backend-ml0uw7x1b9f1617c.sel3.cloudtype.app

## 페이지 목록

| 페이지 | 경로 | 설명 |
|--------|------|------|
| 대시보드 | / | 메인 대시보드 |
| 포지션 | /positions | 포지션 목록 + 종목 검색 |
| 포지션 상세 | /positions/:id | 포지션 상세, 매매계획, 차트 |
| 토론방 | /discussions | 토론 목록 |
| 토론 상세 | /discussions/:id | 실시간 토론 채팅 |
| 요청 | /requests | 매수/매도 요청 목록 |
| 문서 | /reports | 운용보고서, 칼럼 |
| 통계 | /stats | 개인/팀 통계, 리더보드 |
| 설정 | /settings | 테마, 알림 설정 |
| 알림 | /notifications | 알림 목록 |
| 팀 관리 | /team | 팀원 관리 (팀장만) |

---

## 테스트 시나리오

### 1. 매수 요청 및 승인 플로우

**사전 조건**: 팀원/팀장 계정 2개 동시 로그인

#### 1.1 팀원: 매수 요청 제출
1. 포지션 페이지 → 종목 검색 클릭
2. 시장 선택 (코스피/코스닥/나스닥/NYSE/크립토)
3. 종목명 또는 코드 검색
4. 종목 선택 → 매수 요청 클릭
5. 매수가, 수량 입력 (빠른 버튼 테스트: 숫자 선택 → 천/만 클릭)
6. 메모 입력 (선택)
7. 매수 요청 제출

**검증**:
- 요청 생성 성공 메시지
- 팀장에게 실시간 알림 도착

#### 1.2 팀장: 토론 개시 (승인 전)
1. 요청 페이지에서 새 요청 확인
2. 요청 클릭 → 상세 보기
3. "토론 개시" 클릭
4. 토론 제목 입력 → 생성

**검증**:
- 토론방 생성됨
- 팀원에게 토론 시작 알림

#### 1.3 양측: 토론 진행
1. 토론방에서 메시지 교환
2. 의견 제시, 질문/답변

**검증**:
- 실시간 메시지 전송/수신
- WebSocket 연결 유지

#### 1.4 팀장: 토론 종료 및 승인
1. 토론 종료
2. 요청으로 돌아가 승인 클릭
3. 체결가, 체결수량 입력 (또는 기본값 사용)

**검증**:
- 포지션 자동 생성
- 팀원에게 승인 알림
- 포지션 목록에 새 포지션 표시

---

### 2. 포지션 관리 플로우

#### 2.1 매매계획 수정
1. 포지션 상세 페이지 이동
2. 매매계획 탭에서 익절/손절 타겟 추가
3. 저장

**검증**:
- 계획 저장 성공
- 이력에 변경 내역 기록

#### 2.2 매매계획 체크
1. 팀장이 익절/손절 항목 체크 (실행 완료 표시)

**검증**:
- 체크 상태 저장
- UI에 완료 표시

#### 2.3 차트 공유 (토론방)
1. 포지션 상세에서 차트 보기
2. 차트 공유 버튼 클릭
3. 토론방 선택 → 공유

**검증**:
- 토론방에 차트 이미지 표시
- 양측에서 확인 가능

---

### 3. AI 기능 테스트

#### 3.1 AI 의사결정서 생성
**사전 조건**: 토론 세션이 있는 포지션

1. 포지션 상세 → 의사결정 노트 섹션
2. "AI로 작성" 클릭
3. 토론 세션 선택 (다중 선택 가능)
4. 생성 클릭

**검증**:
- 의사결정서 생성됨
- 일일 사용량 카운트 증가 (최대 3회/일)
- 체계적인 형식의 문서 생성

#### 3.2 운용보고서 생성
1. 문서 페이지 → 운용보고서 탭
2. AI 보고서 생성 클릭
3. 기간/포지션 선택
4. 생성

**검증**:
- 보고서 생성됨
- PDF/마크다운 내보내기 가능

---

### 4. 칼럼 작성 테스트

1. 문서 페이지 → 칼럼 탭
2. 새 칼럼 작성 클릭
3. 제목, 내용 입력 (에디터 기능 테스트)
4. 저장

**검증**:
- 칼럼 목록에 표시
- 수정/삭제 가능 (작성자만)

---

### 5. 알림 시스템 테스트

**테스트 항목**:
- [ ] 매수 요청 시 팀장 알림
- [ ] 토론 개시 시 요청자 알림
- [ ] 토론 메시지 수신 알림
- [ ] 요청 승인/거부 시 요청자 알림
- [ ] 매매계획 변경 시 관련자 알림

**검증 방법**:
- 두 브라우저 세션 동시 실행
- 알림 아이콘 뱃지 카운트 확인
- 알림 페이지에서 목록 확인
- 실시간 알림 토스트 확인

---

### 6. 빠른 입력 버튼 테스트

**새 UX (2024-02 업데이트)**:
1. 숫자 버튼 클릭 → 선택됨 (파란색 하이라이트)
2. 천/만 버튼 클릭 → 선택된 숫자 × 단위 추가
3. 같은 숫자 다시 클릭 → 그냥 해당 숫자만 추가
4. 숫자 미선택 시 천/만 버튼 비활성화 (회색)

**테스트 케이스**:
- [ ] +10 클릭 → 만 클릭 → 100,000 추가
- [ ] +5 클릭 → 천 클릭 → 5,000 추가
- [ ] +100 클릭 → +100 클릭 → 100 추가 (단위 없이)

---

---

### 7. WebSocket 연결 테스트 (로그인/로그아웃)

**목적**: 로그인/로그아웃 시 WebSocket이 올바른 사용자로 재연결되는지 확인

**테스트 절차**:
1. 팀장 계정으로 로그인
2. 토론방 입장 → 메시지 전송
3. 로그아웃
4. 팀원 계정으로 로그인
5. 같은 토론방 입장 → 메시지 전송
6. 메시지 발신자 확인

**검증**:
- [ ] 팀장 메시지: "이학현" 또는 팀장 이름으로 표시
- [ ] 팀원 메시지: "테스터" 또는 팀원 이름으로 표시
- [ ] 두 사용자의 메시지가 명확히 구분됨

---

## 변경 이력

| 날짜 | 변경 내용 |
|------|-----------|
| 2024-02-07 | 초기 문서 생성 |
| 2024-02-07 | 빠른 입력 버튼 UX 변경 (숫자 선택 → 단위 클릭 방식) |
| 2024-02-07 | WebSocket 재연결 버그 수정, 테스트 시나리오 추가 |
